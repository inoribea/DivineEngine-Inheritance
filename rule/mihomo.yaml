#### https://wiki.metacubex.one/config

##############################################################################################################################

# 代理端口
#port: 7880
#socks-port: 7881
#redir-port: 7891
#tproxy-port: 7892
#mixed-port: 7890 # HTTP(S) 和 SOCKS 代理混合端口

udp: true
allow-lan: true # 允许局域网的连接
mode: Rule # 规则模式：Rule（规则） / Global（全局代理）/ Direct（全局直连）
geo-auto-update: false
bind-address: "*"
keep-alive-interval: 15
keep-alive-idle: 600
unified-delay: true

listeners:
- name: mixed-in
  type: mixed
  listen: 0.0.0.0
- name: http-in
  type: http
  listen: 0.0.0.0
- name: sock5-in
  type: socks
  listen: 0.0.0.0
- name: redir-in
  type: redir
  listen: 0.0.0.0
- name: tproxy-in
  type: tproxy
  listen: 0.0.0.0
- name: tun-in
  type: tun
  dns-hijack:
      - 0.0.0.0:53 # 需要劫持的 DNS
    # auto-detect-interface: false # 自动识别出口网卡
    # auto-route: false # 配置路由表
    # mtu: 9000 # 最大传输单元
    inet4-address: # 必须手动设置ipv4地址段
      - 198.19.0.1/30
    inet6-address: # 必须手动设置ipv6地址段
      - "fdfe:dcba:9877::1/126"
tun:
  enable: true
  stack: mixed
  device: utun
  dns-hijack:
  - 0.0.0.0:53
  endpoint-independent-nat: true
  auto-route: true
  auto-redirect: true
  exclude-interface:
  - tailscale0

#log-level: silent # silent / info / warning / error / debug。级别越高日志输出量越大，越倾向于调试，若需要请自行开启。

external-controller: '0.0.0.0:9090'
external-controller-cors:
  allow-origins:
    - '*'
  allow-private-network: true

profile:
  store-selected: true
experimental:
  sniff-tls-sni: false
sniffer:
  enable: true
  force-dns-mapping: true
  parse-pure-ip: true
  sniff:
    HTTP:
      ports:
      - 80
      - 8080-8880
      override-destination: true
    TLS:
      ports:
      - 443
      - 8443
    QUIC:
      ports:
      - 443
      - 8443

##############################################################################################################################
